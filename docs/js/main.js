!function(t){function e(e){for(var i,a,o=e[0],l=e[1],u=e[2],h=0,d=[];h<o.length;h++)a=o[h],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&d.push(n[a][0]),n[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);for(c&&c(e);d.length;)d.shift()();return r.push.apply(r,u||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],i=!0,o=1;o<s.length;o++){var l=s[o];0!==n[l]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=s[0]))}return t}var i={},n={0:0},r=[];function a(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=i,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;r.push([545,1]),s()}({1320:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GrillPIDController=void 0;const i=s(1321);class n extends i.PIDControler{constructor(t){super(),this.comms=t,this.controlMasterScale=.5,this.maxSpeed=400,this.minSpeed=100,this.maxCycle=30,this.enabled=!1}enable(){this.enabled=!0}disable(){this.enabled=!1}get isEnabled(){return this.enabled}get fanSpeedMax(){return this.maxSpeed}set fanSpeedMax(t){this.maxSpeed=t,this.changed("fanSpeedMax",t)}get fanSpeedMin(){return this.maxSpeed}set fanSpeedMin(t){this.maxSpeed=t,this.changed("fanSpeedMax",t)}processTemperature(t){let e=this.calculate(t);e=this.mapControlVal(e);let s=this.mapFanSpeed(e),i=this.mapDutyCycle(e)/60*100;this.isEnabled&&this.comms.setFan(s,i,60)}mapControlVal(t){return(t*=this.controlMasterScale)>=1&&(t=1),t<=0&&(t=0),t}mapFanSpeed(t){const e=this.fanSpeedMin;return(t-0)*(this.fanSpeedMax-e)/1+e}mapDutyCycle(t){return 20*(t-0)/1+10}onSetButtonClick(t){switch(t.id){case"PidGainSelection":return void(this.P=parseFloat(t.value));case"PidResetSelection":return void(this.I=parseFloat(t.value));case"PidRateSelection":return void(this.D=parseFloat(t.value));case"PidMinFanSpeedSelection":return void(this.fanSpeedMin=parseFloat(t.value));case"PidMaxFanSpeedSelection":return void(this.fanSpeedMax=parseFloat(t.value));default:return}}}e.GrillPIDController=n},1321:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PIDControler=void 0;const i=s(1322);e.PIDControler=class{constructor(){this.lastError=0,this.cumError=0,this.gP=0,this.gI=0,this.gD=0,this.setPoint=0,this.lastControlVal=0,this.lastRateError=0,this.startTime=new Date,this.previousTime=new Date,this.changedEvent=new i.BasicEventEmitter}get P(){return this.gP}set P(t){this.gP=t,this.changed("P",t)}get I(){return this.gI}set I(t){this.gI=t,this.changed("I",t)}get D(){return this.gD}set D(t){this.gD=t,this.changed("D",t)}get target(){return this.setPoint}set target(t){this.setPoint=t,this.changed("target",t)}get PState(){return this.lastError}get IState(){return this.cumError}get DState(){return this.lastRateError}get output(){return this.lastControlVal}calculate(t){let e=(new Date).getTime()-this.previousTime.getTime(),s=this.setPoint-t,i=s*e;this.cumError+=i;let n=(s-this.lastError)/e,r=s*this.gP+this.cumError*this.gI+n*this.gD;return this.lastError=s,this.lastControlVal=r,this.lastRateError=n,this.changed("IState",this.cumError),this.changed("PState",s),this.changed("DState",this.lastRateError),this.changed("Output",this.lastControlVal),r}onChange(t){this.changedEvent.subscribe(t)}changed(t,e){this.changedEvent.emit({parameter:t,value:e})}}},1322:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicEventEmitter=void 0;e.BasicEventEmitter=class{constructor(){this.listeners=new Array}emit(t){this.listeners.forEach(e=>e(t))}subscribe(t){this.listeners.push(t)}}},545:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});(new(s(546).GrillController)).boot()},546:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GrillController=void 0;const i=s(547),n=s(548),r=s(550),a=s(551),o=s(552),l=s(1320);e.GrillController=class{constructor(){this.setEvents=new i.EventEmitter,this.grillComms=new r.GrillCommunicator,this.status=new n.GrillStatus(this.grillComms),this.basicController=new a.BasicTempController(this.grillComms),this.pidController=new l.GrillPIDController(this.grillComms),this.logger=new o.TempLogger,this.status.onUpdate(t=>this.updateStatus(t)),this.basicController.onUpdate(t=>this.updateControllerStatus(t)),this.setEvents.on("set",t=>this.basicController.onSetButtonClick(t)),this.setEvents.on("set",t=>this.grillComms.onSetButtonClick(t)),this.setEvents.on("set",t=>this.onSetButtonClick(t)),this.setEvents.on("set",t=>this.pidController.onSetButtonClick(t))}boot(){console.log("Grill Controller Booting...."),document.querySelectorAll(".set-button").forEach(t=>{t&&"BUTTON"===t.tagName&&(t.onclick=e=>this.setButtonClicked(t,e))}),this.status.enableAutoUpdate(2e3),console.log("Grill Controller Booted.")}setButtonClicked(t,e){var s=t.dataset.target;if(!s)return;var i=document.getElementById(s);if(!i)return;let n;if("INPUT"==i.tagName)n=i;else{if("SELECT"!=i.tagName)return;n=i}var r=n.value;this.setEvents.emit("set",{button:t,input:n,event:e,id:s,value:r})}onSetButtonClick(t){if("ControlModeSelection"==t.id){switch(parseInt(t.value)){case 0:this.basicController.disable(),this.pidController.disable();break;case 1:this.basicController.manual(),this.pidController.disable();break;case 2:this.basicController.enable(),this.pidController.disable();break;case 3:this.basicController.disable(),this.pidController.enable()}let e=this.getControllerStateDisplay();this.setInputValueById("ControlCurrentMode",e)}}getTemperatureString(t){return t<=-20?"---":t>=750?"MAX":t+" °F"}updateStatus(t){console.log("Updated");let e=t.currentTemp;this.updateTemperatures(e);let s=this.getTemperatureString(e),i=t.fanSpeed?t.fanSpeed.toString():"OFF",n=t.fanStatus?"ON":"OFF";this.updateFanGraphicDisplay(t.fanStatus,t.fanSpeed);let r=`${t.fanOnTime.toString()}s per ${t.fanCycleTime.toString()}s`;this.setInputValueById("MainTempDisplay",s),this.setInputValueById("StatusCurrentTemp",s),this.setInputValueById("StatusFanState",n),this.setInputValueById("StatusFanSpeed",i),this.setInputValueById("StatusFanDutyCycle",r)}updateTemperatures(t){this.basicController.newTemperature(t),this.pidController.processTemperature(t);let e=this.basicController.targetTemp;this.pidController.isEnabled&&(e=this.pidController.target),this.logger.logGrillTemp(t,e),this.logger.plotData("Logger")}updateFanGraphicDisplay(t,e){if(e){let s=-.55*(e-0)/1023+.25,i=document.getElementById("StatusFanImage");i&&(i.classList.add("fan-on"),i.style.animationDuration=s.toString()+"s",t||(i.style.animationDuration="3s"))}else{let t=document.getElementById("StatusFanImage");t&&(t.classList.remove("fan-on"),t.style.animationDuration="0s")}}updateControllerStatus(t){let e=t.targetTemp,s=t.fanSpeed,i=t.onTime,n=t.cycleTime,r=i.toString()+"s per "+n.toString()+"s",a=e.toString()+" °F",o=this.getControllerStateDisplay();this.setInputValueById("ControlCurrentMode",o),this.setInputValueById("MainTargetDisplay",a),this.setInputValueById("ControlCurrentTargetTemp",a),this.setInputValueById("ControlCurrentFanSpeed",s.toString()),this.setInputValueById("ControlCurrentDutyCycle",r)}getControllerStateDisplay(){return this.basicController.enabled?"STANDARD":this.pidController.isEnabled?"PID":this.basicController.isManual?"MANUAL":"DISABLED"}controllerUpdate(){}setInputValueById(t,e){let s=document.getElementById(t);if(s&&"INPUT"===s.tagName){s.value=e}}pidValueChanged(t){switch(t.parameter){case"P":case"I":case"D":let t="P: "+this.pidController.P.toPrecision(2)+" ";return t+="I: "+this.pidController.I.toPrecision(2)+" ",t+="D: "+this.pidController.D.toPrecision(2),void this.setInputValueById("PidCurrentGains",t);case"fanSpeedMin":case"fanSpeedMax":return t="Min: "+this.pidController.fanSpeedMin.toString()+" ",t+="Max: "+this.pidController.fanSpeedMax.toString(),void this.setInputValueById("PidCurrentFanSpeeds",t)}}}},547:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventEmitter=void 0;e.EventEmitter=class{constructor(){this.callbacks={}}on(t,e){this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e)}emit(t,e){let s=this.callbacks[t];s&&s.forEach(t=>{t(e)})}}},548:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GrillStatus=void 0;const i=s(549);e.GrillStatus=class{constructor(t){this.comms=t,this.currentCycleTime=0,this.currentOnTime=0,this.currentFanSpeed=0,this.currentFanState=!1,this.grillTemp=0,this.dummyTemp=0,this.auto=0,this.updateHandlers=Array()}get currentTemp(){let t=this.grillTemp.toPrecision(2);return parseFloat(t)}get fanStatus(){return this.currentFanState}get fanSpeed(){return this.currentFanSpeed}get fanOnTime(){return this.currentOnTime}get fanCycleTime(){return this.currentCycleTime}onUpdate(t){this.updateHandlers.push(t)}enableAutoUpdate(t){this.auto=setInterval(()=>this.update(),t)}disableAutoUpdate(){this.auto&&clearInterval(this.auto)}update(){this.comms.connectionActive&&this.comms.getGrillStatus().then(t=>{this.loadNewStatus(t),this.updated()})}loadNewStatus(t){if(t.hasOwnProperty("fan_duty")&&t.hasOwnProperty("fan_cycle")&&(this.currentCycleTime=t.fan_cycle,this.currentOnTime=t.fan_cycle*t.fan_duty),t.hasOwnProperty("fan_speed")&&(this.currentFanSpeed=t.fan_speed),t.hasOwnProperty("fan_status")&&(this.currentFanState=t.fan_status),t.hasOwnProperty("temp_probe_raw")){let e=t.temp_probe_raw,s=i.GetTemperatureFromADCValue(e,"F");this.grillTemp=s}}updated(){this.updateHandlers.forEach(t=>t(this))}}},549:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetTemperatureFromADCValue=void 0;const i=[736.8,564.2,441.7,386.7,353.1,329.7,312.1,298.1,286.6,276.9,268.6,261.4,254.9,249.2,244.1,239.4,235.1,231.1,227.5,224.1,220.9,218,215.2,212.6,210.1,207.8,205.6,203.5,201.5,199.6,197.7,196,194.3,192.7,191.2,189.7,188.2,186.9,185.5,184.2,183,181.8,180.6,179.5,178.4,177.3,176.3,175.2,174.3,173.3,172.4,171.5,170.6,169.7,168.9,168,167.2,166.5,165.7,164.9,164.2,163.5,162.8,162.1,161.4,160.7,160.1,159.5,158.8,158.2,157.6,157,156.4,155.9,155.3,154.8,154.2,153.7,153.2,152.6,152.1,151.6,151.1,150.6,150.2,149.7,149.2,148.8,148.3,147.9,147.4,147,146.6,146.2,145.8,145.3,144.9,144.5,144.1,143.8,143.4,143,142.6,142.3,141.9,141.5,141.2,140.8,140.5,140.1,139.8,139.5,139.1,138.8,138.5,138.1,137.8,137.5,137.2,136.9,136.6,136.3,136,135.7,135.4,135.1,134.8,134.5,134.2,134,133.7,133.4,133.1,132.9,132.6,132.3,132.1,131.8,131.6,131.3,131.1,130.8,130.6,130.3,130.1,129.8,129.6,129.4,129.1,128.9,128.7,128.4,128.2,128,127.7,127.5,127.3,127.1,126.9,126.6,126.4,126.2,126,125.8,125.7,125.5,125.3,125.1,125,124.8,124.6,124.5,124.2,123.9,123.7,123.4,123.2,122.9,122.7,122.4,122.2,121.9,121.7,121.4,121.2,120.9,120.7,120.5,120.2,120,119.7,119.5,119.3,119.1,118.8,118.6,118.4,118.1,117.9,117.7,117.5,117.3,117,116.8,116.6,116.4,116.2,116,115.7,115.5,115.3,115.1,114.9,114.7,114.5,114.3,114.1,113.9,113.7,113.5,113.3,113.1,112.9,112.7,112.5,112.3,112.1,111.9,111.7,111.5,111.3,111.2,111,110.8,110.6,110.4,110.2,110,109.9,109.7,109.5,109.3,109.1,109,108.8,108.6,108.4,108.2,108.1,107.9,107.7,107.5,107.4,107.2,107,106.9,106.7,106.5,106.4,106.2,103,102.8,102.6,102.4,102.2,102,101.8,101.6,101.4,101.3,101.1,100.9,100.7,100.5,100.3,100.1,99.9,99.8,99.6,99.4,99.2,99,98.8,98.7,98.5,98.3,98.1,97.9,97.8,97.6,97.4,97.2,97.1,96.9,96.7,96.5,96.4,96.2,96,95.8,95.7,95.5,95.3,95.2,95,94.8,94.6,94.5,94.3,94.1,94,93.8,93.6,93.5,93.3,93.2,93,92.8,92.7,92.5,92.3,92.2,92,91.9,91.7,91.5,91.4,91.2,91.1,90.9,90.7,90.6,90.4,90.3,90.1,90,89.8,89.7,89.5,89.4,89.2,89,88.9,88.7,88.6,88.4,88.3,88.1,88,87.8,87.7,87.5,87.4,87.2,87.1,86.9,86.8,86.7,86.5,86.4,86.2,86.1,85.9,85.8,85.6,85.5,85.3,85.2,85.1,84.9,84.8,84.6,84.5,84.3,84.2,84.1,83.9,83.8,83.6,83.5,83.4,83.2,83.1,83,82.8,82.7,82.5,82.4,82.3,82.1,82,81.9,81.7,81.6,81.4,81.3,81.2,81,80.9,80.8,80.6,80.5,80.4,80.2,80.1,80,79.8,79.7,79.6,79.4,79.3,79.2,79,78.9,78.8,78.7,78.5,78.4,78.3,78.1,78,77.9,77.7,77.6,77.5,77.4,77.2,77.1,77,76.9,76.7,76.6,76.5,76.3,76.2,76.1,76,75.8,75.7,75.6,75.5,75.3,75.2,75.1,75,74.8,74.7,74.6,74.5,74.3,74.2,74.1,74,73.9,73.7,73.6,73.5,73.4,73.2,73.1,73,72.9,72.8,72.6,72.5,72.4,72.3,72.1,72,71.9,71.8,71.7,71.5,71.4,71.3,71.2,71.1,71,70.8,70.7,70.6,70.5,70.4,70.2,70.1,70,69.9,69.8,69.6,69.5,69.4,69.3,69.2,69.1,68.9,68.8,68.7,68.6,68.5,68.4,68.2,68.1,68,67.9,67.8,67.7,67.6,67.4,67.3,67.2,67.1,67,66.9,66.7,66.6,66.5,66.4,66.3,66.2,66.1,65.9,65.8,65.7,65.6,65.5,65.4,65.3,65.2,65,64.9,64.8,64.7,64.6,64.5,64.4,64.2,64.1,64,63.9,63.8,63.7,63.6,63.5,63.3,63.2,63.1,63,62.9,62.8,62.7,62.6,62.5,62.3,62.2,62.1,62,61.9,61.8,61.7,61.6,61.5,61.3,61.2,61.1,61,60.9,60.8,60.7,60.6,60.5,60.4,60.2,60.1,60,59.9,59.8,59.7,59.6,59.5,59.4,59.2,59.1,59,58.9,58.8,58.7,58.6,58.5,58.4,58.3,58.2,58,57.9,57.8,57.7,57.6,57.5,57.4,57.3,57.2,57.1,57,56.8,56.7,56.6,56.5,56.4,56.3,56.2,56.1,56,55.9,55.8,55.6,55.5,55.4,55.3,55.2,55.1,55,54.9,54.8,54.7,54.6,54.4,54.3,54.2,54.1,54,53.9,53.8,53.7,53.6,53.5,53.4,53.2,53.1,53,52.9,52.8,52.7,52.6,52.5,52.4,52.3,52.2,52,51.9,51.8,51.7,51.6,51.5,51.4,51.3,51.2,51.1,51,50.8,50.7,50.6,50.5,50.4,50.3,50.2,50.1,50,49.9,49.8,49.6,49.5,49.4,49.3,49.2,49.1,49,48.9,48.8,48.7,48.5,48.4,48.3,48.2,48.1,48,47.9,47.8,47.7,47.6,47.4,47.3,47.2,47.1,47,46.9,46.8,46.7,46.6,46.4,46.3,46.2,46.1,46,45.9,45.8,45.7,45.6,45.4,45.3,45.2,45.1,45,44.9,44.8,44.7,44.5,44.4,44.3,44.2,44.1,44,43.9,43.8,43.6,43.5,43.4,43.3,43.2,43.1,43,42.9,42.7,42.6,42.5,42.4,42.3,42.2,42,41.9,41.8,41.7,41.6,41.5,41.4,41.2,41.1,41,40.9,40.8,40.7,40.5,40.4,40.3,40.2,40.1,40,39.8,39.7,39.6,39.5,39.4,39.3,39.1,39,38.9,38.8,38.7,38.5,38.4,38.3,38.2,38.1,37.9,37.8,37.7,37.6,37.5,37.3,37.2,37.1,37,36.9,36.7,36.6,36.5,36.4,36.2,36.1,36,35.9,35.8,35.6,35.5,35.4,35.3,35.1,35,34.9,34.8,34.6,34.5,34.4,34.3,34.1,34,33.9,33.7,33.6,33.5,33.4,33.2,33.1,33,32.8,32.7,32.6,32.5,32.3,32.2,32.1,31.9,31.8,31.7,31.5,31.4,31.3,31.1,31,30.9,30.7,30.6,30.5,30.3,30.2,30.1,29.9,29.8,29.7,29.5,29.4,29.2,29.1,29,28.8,28.7,28.5,28.4,28.3,28.1,28,27.8,27.7,27.5,27.4,27.3,27.1,27,26.8,26.7,26.5,26.4,26.2,26.1,25.9,25.8,25.6,25.5,25.3,25.2,25,24.9,24.7,24.6,24.4,24.3,24.1,24,23.8,23.6,23.5,23.3,23.2,23,22.9,22.7,22.5,22.4,22.2,22,21.9,21.7,21.5,21.4,21.2,21,20.9,20.7,20.5,20.4,20.2,20,19.8,19.7,19.5,19.3,19.1,19,18.8,18.6,18.4,18.2,18.1,17.9,17.7,17.5,17.3,17.1,16.9,16.7,16.5,16.4,16.2,16,15.8,15.6,15.4,15.2,15,14.8,14.6,14.4,14.1,13.9,13.7,13.5,13.3,13.1,12.9,12.6,12.4,12.2,12,11.8,11.5,11.3,11.1,10.8,10.6,10.4,10.1,9.9,9.6,9.4,9.1,8.9,8.6,8.4,8.1,7.8,7.6,7.3,7,6.8,6.5,6.2,5.9,5.6,5.3,5,4.7,4.4,4.1,3.8,3.5,3.2,2.9,2.5,2.2,1.9,1.5,1.2,.8,.5,.1,-.3,-.7,-1.1,-1.5,-1.9,-2.3,-2.7,-3.1,-3.6,-4,-4.5,-5,-5.5,-6,-6.5,-7,-7.5,-8.1,-8.7,-9.3,-9.9,-10.6,-11.2,-11.9,-12.7,-13.4,-14.3,-15.1,-16,-17,-18,-19.2,-20.4,-21.7,-23.2,-24.9,-26.9,-29.2,-32.3,-36.7,-44.9];e.GetTemperatureFromADCValue=function(t,e="C"){t<=0&&(t=0),t>=1023&&(t=1023);let s=i[t];return"F"==e?9*s/5+32:"K"==e?s+273.15:"C"==e?s:NaN}},550:function(t,e,s){"use strict";var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(n,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,o)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.GrillCommunicator=void 0;e.GrillCommunicator=class{constructor(){this.ip="",this.successfulConnection=!1}onSetButtonClick(t){"StatusGrillIPSelection"==t.id&&this.setIP(t.value)}get connectionActive(){return this.successfulConnection}setFan(t,e=100,s=60){return this.connectionActive?this.reqFanSpeed(t,e,s):Promise.reject("No Active Connection")}getGrillStatus(){return this.successfulConnection?new Promise((t,e)=>{this.reqGrillStatus().then(e=>{t(e)}).catch(t=>{console.error("Status Update Failed: ",t),this.commsFailed(this.ip),e(t)})}):Promise.reject("Grill communcation not established")}reqFanSpeed(t,e=100,s=60){return i(this,void 0,void 0,(function*(){let i={speed:t,duty_cycle:e,cycle_rate:s};return this.makeRequest("fan","POST",i)}))}reqGrillStatus(){return i(this,void 0,void 0,(function*(){return(yield this.makeRequest("status")).json()}))}setIP(t){this.ip=t,this.testRequest().then(()=>this.commsSuccessful(t)).catch(()=>this.commsFailed(t))}updateMessage(t){let e=document.getElementById("StatusGrillConnection");e&&(this.successfulConnection,e.classList.remove("connection-failed"),e.classList.add("connection-successful"),e.innerHTML=t)}commsSuccessful(t){this.successfulConnection=!0,this.updateMessage("Grill Connected at "+t)}commsFailed(t){this.successfulConnection=!1,this.updateMessage("Grill failed to connect at "+t)}testRequest(){return i(this,void 0,void 0,(function*(){return(yield this.makeRequest("")).status}))}makeRequest(t,e=null,s=null){return i(this,void 0,void 0,(function*(){let i={};s&&(i.body=JSON.stringify(s)),e&&(i.method=e),"/"===t&&(t="");let n=`http://${this.ip}/${t}`;return fetch(n,i)}))}}},551:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTempController=void 0;e.BasicTempController=class{constructor(t){this.comms=t,this.fanOnSpeed=100,this.controlTargetTemp=100,this.fanDuty=25,this.fanCycle=60,this.updateListeners=Array(),this.active=!1,this.manualMode=!1}enable(){this.active=!0,this.manualMode=!1,this.updated()}disable(){this.active=!1,this.manualMode=!1,this.updated()}manual(){this.active=!1,this.manualMode=!0,this.updated()}get enabled(){return this.active}get isManual(){return this.manualMode}set fanSpeed(t){let e=t;NaN!==e&&(e<=0&&(e=0),e>=1e3&&(e=1e3),this.fanOnSpeed=e,this.updated())}get fanSpeed(){return this.fanOnSpeed}set targetTemp(t){NaN!==t&&(t<=0&&(t=0),t>=400&&(t=400),this.controlTargetTemp=t,this.updated())}get targetTemp(){return this.controlTargetTemp}set onTime(t){if(NaN===t)return;if(t<=0&&(t=0),t>=this.fanCycle)return void(this.fanDuty=100);let e=t/this.fanCycle;this.fanDuty=100*e,this.updated()}get onTime(){return this.fanDuty/100*this.fanCycle}set cycleTime(t){NaN!==t&&(t<=0&&(t=0),t>=600&&(t=600),this.fanCycle=t,this.updated())}get cycleTime(){return this.fanCycle}onSetButtonClick(t){switch(t.id){case"ControlTempSelection":this.targetTemp=parseFloat(t.value);break;case"ControlFanSpeedSelection":this.fanSpeed=parseFloat(t.value);break;case"ControlDutyCycleSelectionOn":let e=parseFloat(t.value),s=document.getElementById("ControlDutyCycleSelectionCycle");if(s){let t=s.value;this.cycleTime=parseFloat(t)}this.onTime=e}1==this.manualMode&&this.turnOnFan()}onUpdate(t){this.updateListeners.push(t)}newTemperature(t){this.active&&this.control(t)}control(t){t<this.targetTemp?this.turnOnFan():this.turnOffFan()}turnOnFan(){this.comms.connectionActive&&this.comms.setFan(this.fanSpeed,this.fanDuty,this.fanCycle)}turnOffFan(){this.comms.connectionActive&&this.comms.setFan(0,this.fanDuty,this.fanCycle)}updated(){this.updateListeners.forEach(t=>t(this))}}},552:function(t,e,s){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,s,i){void 0===i&&(i=s),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,i){void 0===i&&(i=s),t[i]=e[s]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.hasOwnProperty.call(t,s)&&i(e,t,s);return n(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.TempLogger=e.TempDataTrace=void 0;const a=r(s(553));class o{constructor(){this.timestamps=Array(),this.temperatures=Array(),this.target=Array()}add(t,e){this.timestamps.push(new Date),this.target.push(e),this.temperatures.push(t)}}e.TempDataTrace=o;e.TempLogger=class{constructor(){this.startTime=new Date,this.grillTempData=new o,this.targetTempData=new o,this.dataRevision=0,this.timer=0}logGrillTemp(t,e){this.grillTempData.add(t,e)}plotData(t){this.grillTempData;this.dataRevision++;let e={title:"Temperature",datarevision:this.dataRevision};if(0==this.timer){let s={x:this.grillTempData.timestamps,y:this.grillTempData.temperatures,type:"scatter",name:"Grill Temperature"},i={x:this.grillTempData.timestamps,y:this.grillTempData.target,type:"scatter",name:"Target Temperature"};a.react(t,[s,i],e,{responsive:!0})}this.timer=(this.timer+1)%8}}},828:function(t,e){}});